geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SD, ymax=Error.M+Error.SD))
d$State <- factor(d$State, levels = d$State[-order(d$Error.M)])
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SD, ymax=Error.M+Error.SD))
d$State <- factor(d$State, levels = d$State[sort(-d$Error.M)])
d$State <- factor(d$State, levels = d$State[order(-d$Error.M)])
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SD, ymax=Error.M+Error.SD))
d$State <- factor(d$State, levels = d$State[order(d$Error.M)])
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SD, ymax=Error.M+Error.SD))
d <- difference %>% filter(State!="U.S.", End>as.numeric(as.Date(("2016-10-24")))) %>%
group_by(State, Winner, PollLeader) %>%
summarise(N=n(), n.Respondents=sum(SampleSize), Error.M=mean(Error), Error.SD=sd(Error), Error.SE=Error.SD/sqrt(N)) %>%
arrange(Error.M)
d$State <- factor(d$State, levels = d$State[order(d$Error.M)])
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SD, ymax=Error.M+Error.SD))
d <- difference %>% filter(State!="U.S.", End>as.numeric(as.Date(("2016-10-24")))) %>%
group_by(State, Winner, PollLeader) %>%
summarise(N=n(), n.Respondents=sum(SampleSize), Error.M=mean(Error), Error.SD=sd(Error), Error.SE=Error.SD/sqrt(N)) %>%
arrange(Error.M)
View(d)
head(difference)
d <- difference %>% filter(State!="U.S.", End>as.numeric(as.Date(("2016-10-24")))) %>%
group_by(State, Winner) %>%
summarise(N=n(), n.Respondents=sum(SampleSize), Error.M=mean(Error), Error.SD=sd(Error), Error.SE=Error.SD/sqrt(N)) %>%
arrange(Error.M)
d$State <- factor(d$State, levels = d$State[order(d$Error.M)])
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SD, ymax=Error.M+Error.SD))
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE))
head(polls)
head(d)
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE)) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error (Actual - Projected)") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "Positive values = Clinton lead; Negative values = Trump lead")
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE)) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "Positive values = polls overestimated Trump; Negative values = polls overestimated Clinton")
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE)) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "Positive values = polls overestimated Trump\nNegative values = polls overestimated Clinton")
ggplot(data=d, aes(x=Difference)) +
geom_histogram(binwidth=.5) +
geom_vline(xintercept=mean(d$Difference), linetype="dashed") +
geom_vline(xintercept=filter(election, State=="U.S.", Candidate=="Clinton")$Level-filter(election, State=="U.S.", Candidate=="Trump")$Level, color="#3399FF") +
geom_label(angle = 90, x=mean(d$Difference), y=12, label="Projected", size=3) +
geom_label(angle = 90, x=filter(election, State=="U.S.", Candidate=="Clinton")$Level-filter(election, State=="U.S.", Candidate=="Trump")$Level, y=18, label="Final", size=3, color="#3399FF") +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("Margin (%)") + ylab("# of polls") +
labs(title = "Projected difference in popular vote-share",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "Positive values = Clinton lead\nNegative values = Trump lead")
d <- difference %>% filter(State=="U.S.", End>as.numeric(as.Date(("2016-10-24"))))
ggplot(data=d, aes(x=Difference)) +
geom_histogram(binwidth=.5) +
geom_vline(xintercept=mean(d$Difference), linetype="dashed") +
geom_vline(xintercept=filter(election, State=="U.S.", Candidate=="Clinton")$Level-filter(election, State=="U.S.", Candidate=="Trump")$Level, color="#3399FF") +
geom_label(angle = 90, x=mean(d$Difference), y=12, label="Projected", size=3) +
geom_label(angle = 90, x=filter(election, State=="U.S.", Candidate=="Clinton")$Level-filter(election, State=="U.S.", Candidate=="Trump")$Level, y=18, label="Final", size=3, color="#3399FF") +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("Margin (%)") + ylab("# of polls") +
labs(title = "Projected difference in popular vote-share",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "Positive values = Clinton lead\nNegative values = Trump lead")
polls %>% filter(Type=="Raw", State=="U.S.", End>as.numeric(as.Date(("2016-10-24")))) %>%
ggplot(aes(x=Error, fill=Candidate, condition=Candidate)) +
geom_density(alpha=0.3) +
geom_vline(xintercept=0) +
xlab("Error (Actual - Projected)") + ylab("Proportion of polls") +
scale_fill_manual(values=c("#3399FF", "#FF3333")) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
labs(title = "Error in popular vote projections",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "Positive values = Polls underestimated actual vote-share\nNegative values = Polls overestimated actual vote-share")
polls %>% filter(Type=="Raw", State=="U.S.", End>as.numeric(as.Date(("2016-10-24")))) %>%
ggplot(aes(x=Error, fill=Candidate, condition=Candidate)) +
geom_density(alpha=0.3) +
geom_vline(xintercept=0) +
xlab("Error (Actual - Projected)") + ylab("Proportion of polls") +
scale_fill_manual(values=c("#3399FF", "#FF3333")) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
labs(title = "Error in popular vote projections",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nPositive values = Polls underestimated actual vote-share\nNegative values = Polls overestimated actual vote-share")
ggplot(data=d, aes(x=Difference)) +
geom_histogram(binwidth=.5) +
geom_vline(xintercept=mean(d$Difference), linetype="dashed") +
geom_vline(xintercept=filter(election, State=="U.S.", Candidate=="Clinton")$Level-filter(election, State=="U.S.", Candidate=="Trump")$Level, color="#3399FF") +
geom_label(angle = 90, x=mean(d$Difference), y=12, label="Projected", size=3) +
geom_label(angle = 90, x=filter(election, State=="U.S.", Candidate=="Clinton")$Level-filter(election, State=="U.S.", Candidate=="Trump")$Level, y=18, label="Final", size=3, color="#3399FF") +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("Margin (%)") + ylab("# of polls") +
labs(title = "Projected difference in popular vote-share",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nPositive values = Clinton lead\nNegative values = Trump lead")
d <- difference %>% filter(State!="U.S.", End>as.numeric(as.Date(("2016-10-24")))) %>%
group_by(State, Winner) %>%
summarise(N=n(), n.Respondents=sum(SampleSize), Error.M=mean(Error), Error.SD=sd(Error), Error.SE=Error.SD/sqrt(N)) %>%
arrange(Error.M)
d$State <- factor(d$State, levels = d$State[order(d$Error.M)])
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE)) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nPositive values = polls overestimated Trump\nNegative values = polls overestimated Clinton")
d <- difference %>% filter(State!="U.S.", End>as.numeric(as.Date(("2016-10-24")))) %>%
group_by(State, Winner) %>%
summarise(N=n(), n.Respondents=sum(SampleSize), Error.M=mean(Error), Error.SD=sd(Error), Error.SE=Error.SD/sqrt(N)) %>%
arrange(Error.M)
d$State <- factor(d$State, levels = d$State[-order(d$Error.M)])
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE)) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nPositive values = polls overestimated Trump\nNegative values = polls overestimated Clinton")
d <- difference %>% filter(State!="U.S.", End>as.numeric(as.Date(("2016-10-24")))) %>%
group_by(State, Winner) %>%
summarise(N=n(), n.Respondents=sum(SampleSize), Error.M=mean(Error), Error.SD=sd(Error), Error.SE=Error.SD/sqrt(N)) %>%
arrange(Error.M)
d$State <- factor(d$State, levels = d$State[order(-d$Error.M)])
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE)) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nPositive values = polls overestimated Trump\nNegative values = polls overestimated Clinton")
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE)) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nPositive values = polls biased towards Trump\nNegative values = polls biased towards Clinton")
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nPositive values = polls biased towards Trump\nNegative values = polls biased towards Clinton")
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nPositive values = polls biased towards Trump\nNegative values = polls biased towards Clinton") +
coord_flip()
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
```{r differenceState, echo=FALSE, message=FALSE, fig.align="center", fig.height=10}
```{r differenceState, echo=FALSE, message=FALSE, fig.align="center", fig.height=9}
```{r differenceState, echo=FALSE, message=FALSE, fig.align="center", fig.height=3}
```{r differenceState, echo=FALSE, message=FALSE, fig.align="center", fig.height=3 }
```{r differenceState, echo=FALSE, message=FALSE, fig.align="center", fig.height=3.5 }
d <- difference %>% filter(State!="U.S.", End>as.numeric(as.Date(("2016-10-24")))) %>%
group_by(State, Winner) %>%
summarise(N=n(), n.Respondents=sum(SampleSize), Error.M=mean(Error), Error.SD=sd(Error), Error.SE=Error.SD/sqrt(N)) %>%
arrange(Error.M)
d <- difference %>% filter(State!="U.S.", End>as.numeric(as.Date(("2016-10-24")))) %>%
group_by(State, Winner) %>%
summarise(N=n(), n.Respondents=sum(SampleSize), Error.M=mean(Error), Error.SD=sd(Error), Error.SE=Error.SD/sqrt(N)) %>%
arrange(Error.M)
d$State <- factor(d$State, levels = d$State[order(-d$Error.M)])
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(tidyverse)
library(reshape2)
library(ggthemes)
load(file="election.Rda")
difference <- polls %>% filter(Type=="Raw") %>%
group_by(ID, State, End, SampleSize, Winner) %>%
summarise(Difference=diff(Level), Error=Difference-diff(Election)) %>%
arrange(ID)
load(file="polls.Rda")
load(file="election.Rda")
difference <- polls %>% filter(Type=="Raw") %>%
group_by(ID, State, End, SampleSize, Winner) %>%
summarise(Difference=diff(Level), Error=Difference-diff(Election)) %>%
arrange(ID)
difference$Difference <- difference$Difference*(-1)
difference$PollLeader <- as.factor(ifelse(difference$Difference>0, "Clinton",
ifelse(difference$Difference<0, "Trump", "Even")))
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
ylim(c(-15,-10,-5,0,5,10,15)) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
d <- difference %>% filter(State!="U.S.", End>as.numeric(as.Date(("2016-10-24")))) %>%
group_by(State, Winner) %>%
summarise(N=n(), n.Respondents=sum(SampleSize), Error.M=mean(Error), Error.SD=sd(Error), Error.SE=Error.SD/sqrt(N)) %>%
arrange(Error.M)
d$State <- factor(d$State, levels = d$State[order(-d$Error.M)])
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
ylim(c(-15,-10,-5,0,5,10,15)) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
ylim(c(-18,-10,-5,0,5,10,15)) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
ggplot(data=d, aes(x=State, y=Error.M)) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
ggplot(data=d, aes(x=State, y=Error.M)) +
facet_grid(~ Winner) +
geom_point(aes(color=Winner)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
ggplot(data=d, aes(x=State, y=Error.M)) +
facet_grid(~ Winner) +
geom_point(aes(color=Winner, size=n.Respondents)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
ggplot(data=d, aes(x=State, y=Error.M)) +
facet_grid(~ Winner) +
geom_point(aes(color=Winner, size=N)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
ggplot(data=d, aes(x=State, y=Error.M)) +
# facet_grid(~ Winner) +
geom_point(aes(color=Winner, size=N)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
ggplot(data=d, aes(x=State, y=Error.M)) +
facet_grid(~ Winner) +
geom_point(aes(color=Winner, size=N)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
install.packages("plotly")
library("plotly", lib.loc="/Library/Frameworks/R.framework/Versions/3.3/Resources/library")
py$ggplotly(g, session="knitr", kwargs=list(filename="cars_knitr",
fileopt="overwrite"))
py <- plotly()
help(signup, package = 'plotly')
library("shiny", lib.loc="/Library/Frameworks/R.framework/Versions/3.3/Resources/library")
signup("kevinswx", "kevin.soo.87@gmail.com")
install.packages("ggplotly")
p <- plotly(username="kevinswx", key="74FUjVm6PMg7mED1VGaC")
p <- ggplotly(username="kevinswx", key="74FUjVm6PMg7mED1VGaC")
p
p
py
g <- ggplot(data=d, aes(x=State, y=Error.M)) +
facet_grid(~ Winner) +
geom_point(aes(color=Winner, size=N)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
ggplotly(g, session="knitr", kwargs=list(filename="cars_knitr",
fileopt="overwrite"))
ggplot(data=d, aes(x=State, y=Error.M)) +
facet_grid(~ Winner) +
geom_point(aes(color=Winner, size=N)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
ggplot(data=d, aes(x=State, y=Error.M, label=State)) +
facet_grid(~ Winner) +
geom_point(aes(color=Winner, size=N)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
g <- ggplot(data=d, aes(x=State, y=Error.M, label=State)) +
facet_grid(~ Winner) +
geom_point(aes(color=Winner, size=N)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
ggplotly(g, session="knitr", kwargs=list(filename="cars_knitr",
fileopt="overwrite"))
g <- ggplot(data=d, aes(label=State)) +
facet_grid(~ Winner) +
geom_point(aes(x=State, y=Error.M, color=Winner, size=N)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
ggplotly(g, session="knitr", kwargs=list(filename="cars_knitr",
fileopt="overwrite"))
g <- ggplot(data=d, aes(x=State, y=Error.M, label=State)) +
facet_grid(~ Winner) +
geom_point(aes(color=Winner, size=N)) +
geom_errorbar(aes(ymin=Error.M-Error.SE, ymax=Error.M+Error.SE), width=0.1) +
geom_hline(yintercept=0) +
scale_color_manual(values=c("#3399FF", "#FF3333")) +
theme_minimal() +
xlab("State") + ylab("Error in projected margin") +
labs(title = "Error in projected margin in state polls",
subtitle = "Polls from 10/25/2016 to 11/07/2016",
caption = "\nNegative values = polls underestimated Trump\nPositive values = polls underestimated Clinton") +
coord_flip()
ggplotly(g, session="knitr", kwargs=list(filename="cars_knitr",
fileopt="overwrite"))
